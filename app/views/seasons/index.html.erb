<nav class="navbar navbar-light bg-light">
  <a class="navbar-brand" href="/seasons">Home</a>
  <form class="form-inline">
    <a class="btn btn-outline-primary" href="/finals" role="button">
      Finals History
    </a>
    <div style="padding-left: 10px;">
      <a class="btn btn-outline-success" href="/awards" role="button">
      Awards History
      </a>
    </div>
  </form>
</nav>



<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>

table, th, td {
  border: 1px solid black;
}

th, td {
  padding: 10px;
}

body {font-family: Arial;}

/* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}


</style>
</head>



<body>
  <div class="tab">
    <% @seasons.each do |season| %>
      <button class="tablinks" onclick="openYear(event, '<%= season.year_id %>' )"><%= season.year_id %></button>
    <% end %>
  </div>


  <h1>Players</h1>
  <%= link_to 'Create Season', new_season_path %>



  <% @seasons.each do |season| %>
    <div id="<%= season.year_id %>" class="tabcontent">


      


      <h5> Click on a category header to sort </h5>








      <div id="grid_<%= season.year_id %>"></div>
      <script>
          function openYear(evt, YearName) {
            console.log(YearName);
            console.log(evt);
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
              tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
              tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(YearName).style.display = "block";
            evt.currentTarget.className += " active";
          }

        var players = [
          <% season.players.each do |player| %>
            { "Name": `<%= link_to player.name, player_path(player) %>`, "Team": "<%= player.Team %>", "College": "<%= player.college %>", "Year": <%= player.years %>, "Draft Pick": "<%= player.draftpick %>", "Position": "<%= player.position %>",
              "GP": <%= player.GP %>, "MPG": <%= player.MPG %>, "PPG": <%= player.PPG %>, "RPG": <%= player.RPG %>, "APG": <%= player.APG %>, "BPG": <%= player.BPG %>, "SPG": <%= player.SPG %>,
              "FGP": <%= player.fgp %>, "TPP": <%= player.tpp %>, "FTP": <%= player.ftp %>, "Awards": "<%= player.award %>"},
          <% end %>
          ];



        var countries = [
            { Name: "", Id: 0 },
            { Name: "United States", Id: 1 },
            { Name: "Canada", Id: 2 },
            { Name: "United Kingdom", Id: 3 }
        ];
    
        $("#grid_<%= season.year_id %>").jsGrid({
            width: "100%",
            
    
            inserting: true,
            filtering: true,
            editing: true,
            sorting: true,
            paging: true,
            autoload: true,
    
            data: players,
    
            fields: [
                { name: "Name", type: "text", width: 100, validate: "required" },
                { name: "Team", type: "text", width: 100 },
                { name: "College", type: "text", width: 150 },
                { name: "Year", type: "number", width: 50 },
                { name: "Draft Pick", type: "number", width: 50 },
                { name: "Position", type: "text", width: 100 },
                { name: "GP", type: "number", width: 50 },
                { name: "MPG", type: "number", width: 50 },
                { name: "PPG", type: "number", width: 50 },
                { name: "RPG", type: "number", width: 50 },
                { name: "APG", type: "number", width: 50 },
                { name: "BPG", type: "number", width: 50 },
                { name: "SPG", type: "number", width: 50 },
                { name: "FGP", type: "number", width: 50 },
                { name: "TPP", type: "number", width: 50 },
                { name: "FTP", type: "number", width: 50 },
                { name: "Awards", type: "text", width: 200 },
                { type: "control" }
            ]
        });
      </script>





      <div><%= link_to 'Create Player', new_player_path %></div>
    </div>
    
    <% end %>


</body>

<p id="notice"><%= notice %></p>